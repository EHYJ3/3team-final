<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- Favicon icon -->
    <link rel="icon" type="image/png" sizes="16x16" th:href="@{/images/favicon.png}">
    <link rel="stylesheet" th:href="@{/vendor/owl-carousel/css/owl.carousel.min.css}">
    <link rel="stylesheet" th:href="@{/vendor/owl-carousel/css/owl.theme.default.min.css}">
    <link rel="stylesheet" th:href="@{/vendor/jqvmap/css/jqvmap.min.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" th:href="@{/css/admin.css}">
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="https://d3js.org/topojson.v2.min.js"></script>
</head>
<body>

<!--*******************
    Preloader start
********************-->
<div id="preloader">
    <div class="sk-three-bounce">
        <div class="sk-child sk-bounce1"></div>
        <div class="sk-child sk-bounce2"></div>
        <div class="sk-child sk-bounce3"></div>
    </div>
</div>
<!--*******************
    Preloader end
********************-->


<!--**********************************
    Main wrapper start
***********************************-->
<div id="main-wrapper">

    <!--**********************************
        Nav header start
    ***********************************-->
    <div class="nav-header">
        <a th:href="@{/index}" class="brand-logo">
            <img class="logo-abbr" th:src="@{/images/logo.png}" alt="">
            <img class="logo-compact" th:src="@{/images/logo-text.png}" alt="">
            <img class="brand-title" th:src="@{/images/logo-text.png}" alt="">
        </a>

        <div class="nav-control">
            <div class="hamburger">
                <span class="line"></span><span class="line"></span><span class="line"></span>
            </div>
        </div>
    </div>
    <!--**********************************
        Nav header end
    ***********************************-->

    <!--**********************************
        Header start
    ***********************************-->
    <div class="header">
        <div class="header-content">
            <nav class="navbar navbar-expand">
                <div class="collapse navbar-collapse justify-content-between">
                    <div class="header-left">
                        <div class="search_bar dropdown">
                                <span class="search_icon p-3 c-pointer" data-toggle="dropdown">
                                    <i class="mdi mdi-magnify"></i>
                                </span>
                            <div class="dropdown-menu p-0 m-0">
                                <form>
                                    <input class="form-control" type="search" placeholder="Search" aria-label="Search">
                                </form>
                            </div>
                        </div>
                    </div>

                    <ul class="navbar-nav header-right">
                        <li class="nav-item dropdown notification_dropdown">
                            <a class="nav-link" href="#" role="button" data-toggle="dropdown">
                                <i class="mdi mdi-bell"></i>
                                <div class="pulse-css"></div>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right">
                                <ul class="list-unstyled">
                                    <li class="media dropdown-item">
                                        <span class="success"><i class="ti-user"></i></span>
                                        <div class="media-body">
                                            <a href="#">
                                                <p><strong>Martin</strong> has added a <strong>customer</strong>
                                                    Successfully
                                                </p>
                                            </a>
                                        </div>
                                        <span class="notify-time">3:20 am</span>
                                    </li>
                                    <li class="media dropdown-item">
                                        <span class="primary"><i class="ti-shopping-cart"></i></span>
                                        <div class="media-body">
                                            <a href="#">
                                                <p><strong>Jennifer</strong> purchased Light Dashboard 2.0.</p>
                                            </a>
                                        </div>
                                        <span class="notify-time">3:20 am</span>
                                    </li>
                                    <li class="media dropdown-item">
                                        <span class="danger"><i class="ti-bookmark"></i></span>
                                        <div class="media-body">
                                            <a href="#">
                                                <p><strong>Robin</strong> marked a <strong>ticket</strong> as unsolved.
                                                </p>
                                            </a>
                                        </div>
                                        <span class="notify-time">3:20 am</span>
                                    </li>
                                    <li class="media dropdown-item">
                                        <span class="primary"><i class="ti-heart"></i></span>
                                        <div class="media-body">
                                            <a href="#">
                                                <p><strong>David</strong> purchased Light Dashboard 1.0.</p>
                                            </a>
                                        </div>
                                        <span class="notify-time">3:20 am</span>
                                    </li>
                                    <li class="media dropdown-item">
                                        <span class="success"><i class="ti-image"></i></span>
                                        <div class="media-body">
                                            <a href="#">
                                                <p><strong> James.</strong> has added a<strong>customer</strong>
                                                    Successfully
                                                </p>
                                            </a>
                                        </div>
                                        <span class="notify-time">3:20 am</span>
                                    </li>
                                </ul>
                                <a class="all-notification" href="#">See all notifications <i
                                        class="ti-arrow-right"></i></a>
                            </div>
                        </li>
                        <li class="nav-item dropdown header-profile">
                            <a class="nav-link" href="#" role="button" data-toggle="dropdown">
                                <i class="mdi mdi-account"></i>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right">
                                <a th:href="@{/app-profile.html}" class="dropdown-item">
                                    <i class="icon-user"></i>
                                    <span class="ml-2">Profile</span>
                                </a>
                                <a th:href="@{/email-inbox.html}" class="dropdown-item">
                                    <i class="icon-envelope-open"></i>
                                    <span class="ml-2">Inbox</span>
                                </a>
                                <a th:href="@{/logout}" class="dropdown-item">
                                    <i class="icon-key"></i>
                                    <span class="ml-2">Logout</span>
                                </a>
                            </div>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
    </div>
    <!--**********************************
        Header end ti-comment-alt
    ***********************************-->

    <!--**********************************
        Sidebar start
    ***********************************-->
    <div class="quixnav">
        <div class="quixnav-scroll">
            <ul class="metismenu" id="menu">
                <li class="nav-label first">Main Menu</li>
                <li><a class="has-arrow" href="javascript:void()" aria-expanded="false"><i
                        class="fas fa-building"></i><span class="nav-text">Company</span></a>
                    <ul aria-expanded="false">
                        <li><a th:href="@{/admin/approve}">승인 관리</a></li>
                        <li><a th:href="@{/admin/companyList}">기업관리 목록</a></li>
                    </ul>
                </li>
                <li><a class="has-arrow" href="javascript:void()" aria-expanded="false"><i
                        class="fas fa-users"></i><span class="nav-text">User</span></a>
                    <ul aria-expanded="false">
                        <li><a th:href="@{/admin/jobSeekerList}">개인 회원 목록</a></li>
                    </ul>
                </li>
                <li><a class="has-arrow" href="javascript:void()" aria-expanded="false"><i
                        class="fas fa-clipboard-list"></i><span class="nav-text">Post List</span></a>
                    <ul aria-expanded="false">
                        <li><a th:href="@{jobPostsList}">공고 리스트</a></li>
                    </ul>
                </li>
                <li><a class="has-arrow" href="javascript:void()" aria-expanded="false"><i
                        class="fas fa-ban"></i><span class="nav-text">BlackList</span></a>
                    <ul aria-expanded="false">
                        <li><a th:href="@{/admin/blacklist}">블랙리스트 관리</a></li>
                    </ul>
                </li>
                <li><a class="has-arrow" href="javascript:void()" aria-expanded="false">
                    <i class="fas fa-envelope"></i><span class="nav-text">Inquiry List</span></a>
                    <ul aria-expanded="false">
                        <li><a th:href="@{/admin/suggestionList}">문의사항 관리</a></li>
                    </ul>
                </li>
                <li class="nav-label">Forms</li>
                <li><a class="has-arrow" href="javascript:void()" aria-expanded="false"><i
                        class="icon icon-form"></i><span class="nav-text">Forms</span></a>
                    <ul aria-expanded="false">
                        <li><a th:href="@{/form-element.html}">Form Elements</a></li>

                    </ul>
                </li>
                <li class="nav-label">Table</li>
                <li><a class="has-arrow" href="javascript:void()" aria-expanded="false"><i
                        class="icon icon-layout-25"></i><span class="nav-text">Table</span></a>
                    <ul aria-expanded="false">
                        <li><a th:href="@{/table-bootstrap-basic.html}">Bootstrap</a></li>
                        <li><a th:href="@{/table-datatable-basic.html}">Datatable</a></li>
                    </ul>
                </li>

                <li class="nav-label">Extra</li>
                <li><a class="has-arrow" href="javascript:void()" aria-expanded="false"><i
                        class="icon icon-single-copy-06"></i><span class="nav-text">Pages</span></a>
                    <ul aria-expanded="false">
                        <li><a th:href="@{/page-register.html}">Register</a></li>
                        <li><a th:href="@{/page-login.html}">Login</a></li>
                        <li><a class="has-arrow" href="javascript:void()" aria-expanded="false">Error</a>
                            <ul aria-expanded="false">
                                <li><a th:href="@{/page-error-400.html}">Error 400</a></li>
                                <li><a th:href="@{/page-error-403.html}">Error 403</a></li>
                                <li><a th:href="@{/page-error-404.html}">Error 404</a></li>
                                <li><a th:href="@{/page-error-500.html}">Error 500</a></li>
                                <li><a th:href="@{/page-error-503.html}">Error 503</a></li>
                            </ul>
                        </li>
                        <li><a th:href="@{/page-lock-screen.html}">Lock Screen</a></li>
                    </ul>
                </li>
            </ul>
        </div>


    </div>
    <!--**********************************
        Sidebar end
    ***********************************-->

    <!--**********************************
        Content body start
    ***********************************-->
    <div class="content-body">
        <!-- row -->
        <div class="container-fluid">
            <div class="row">
                <!-- 공고별 결제 금액 카드 -->
                <div class="col-lg-3 col-sm-6">
                    <div class="card">
                        <div class="stat-widget-two card-body">
                            <div class="stat-content">
                                <div class="stat-text">총 결제 금액</div>
                                <div class="stat-digit">
                                    <i class="fa fa-usd"></i><span id="totalExpenses">0</span>
                                </div>
                            </div>
                            <div class="progress">
                                <div id="progressBar" class="progress-bar progress-bar-success" role="progressbar"
                                     aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 총 공고를 조회한 수 -->
                <div class="col-lg-3 col-sm-6">
                    <div class="card">
                        <div class="stat-widget-two card-body">
                            <div class="stat-content">
                                <div class="stat-text">총 공고 조회수</div>
                                <div class="stat-digit"><i class="fa fa-eye"></i><span id="totalViews">0</span></div>
                            </div>
                            <div class="progress">
                                <div class="progress-bar progress-bar-primary" id="viewProgressBar" role="progressbar"
                                     aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 총 공고 곗수 -->
                <div class="col-lg-3 col-sm-6">
                    <div class="card">
                        <div class="stat-widget-two card-body">
                            <div class="stat-content">
                                <div class="stat-text">총 공고수</div>
                                <div class="stat-digit"><i class="fa fa-briefcase"></i> <span
                                        id="totalJobPosts">0</span></div>
                            </div>
                            <div class="progress">
                                <div class="progress-bar progress-bar-info" id="jobPostProgressBar" role="progressbar"
                                     aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-sm-6">
                    <div class="card">
                        <div class="stat-widget-two card-body">
                            <div class="stat-content">
                                <div class="stat-text">지원 수</div>
                                <div class="stat-digit">
                                    <i class="fa fa-briefcase"></i> <span id="totalApplications">0</span>
                                </div>
                            </div>
                            <div class="progress">
                                <div class="progress-bar progress-bar-danger" id="applicationsProgressBar"
                                     role="progressbar"
                                     aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- /# column -->
            </div>
            <div class="row">
                <div class="col-xl-8 col-lg-8 col-md-8">
                    <div class="card">
                        <div class="card-header">
                            <h4 class="card-title">월별 수입</h4>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-xl-12 col-lg-12">
                                    <!-- Morris 차트를 표시할 곳 -->
                                    <div id="morris-line-chart" style="height: 300px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-4 col-lg-4 col-md-4">
                    <div class="card">
                        <div class="card-body text-center">
                            <div class="m-t-10">
                                <h4 class="card-title">손님 피드백</h4>
                                <h2 class="mt-3" id="feedbackCount">10000</h2>
                            </div>
                            <div class="widget-card-circle mt-5 mb-5" id="info-circle-card">
                                <i class="ti-control-shuffle pa"></i>
                            </div>
                            <ul class="widget-line-list m-b-15">
                                <li class="border-right">92% <br><span class="text-success"><i
                                        class="ti-hand-point-up"></i> Positive</span></li>
                                <li>8% <br><span class="text-danger"><i
                                        class="ti-hand-point-down"></i> Negative</span></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <main layout:fragment="content">
                <!-- 기본 콘텐츠 -->
            </main>

            <div class="row">
                <div class="col-lg-6 col-xl-4 col-xxl-6 col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h4 class="card-title">Timeline</h4>
                        </div>
                        <div class="card-body">
                            <div class="widget-timeline">
                                <ul class="timeline">
                                    <li>
                                        <div class="timeline-badge primary"></div>
                                        <a class="timeline-panel text-muted" href="#">
                                            <span>10 minutes ago</span>
                                            <h6 class="m-t-5">Youtube, a video-sharing website, goes live.</h6>
                                        </a>
                                    </li>

                                    <li>
                                        <div class="timeline-badge warning">
                                        </div>
                                        <a class="timeline-panel text-muted" href="#">
                                            <span>20 minutes ago</span>
                                            <h6 class="m-t-5">Mashable, a news website and blog, goes live.</h6>
                                        </a>
                                    </li>

                                    <li>
                                        <div class="timeline-badge danger">
                                        </div>
                                        <a class="timeline-panel text-muted" href="#">
                                            <span>30 minutes ago</span>
                                            <h6 class="m-t-5">Google acquires Youtube.</h6>
                                        </a>
                                    </li>

                                    <li>
                                        <div class="timeline-badge success">
                                        </div>
                                        <a class="timeline-panel text-muted" href="#">
                                            <span>15 minutes ago</span>
                                            <h6 class="m-t-5">StumbleUpon is acquired by eBay. </h6>
                                        </a>
                                    </li>

                                    <li>
                                        <div class="timeline-badge warning">
                                        </div>
                                        <a class="timeline-panel text-muted" href="#">
                                            <span>20 minutes ago</span>
                                            <h6 class="m-t-5">Mashable, a news website and blog, goes live.</h6>
                                        </a>
                                    </li>

                                    <li>
                                        <div class="timeline-badge dark">
                                        </div>
                                        <a class="timeline-panel text-muted" href="#">
                                            <span>20 minutes ago</span>
                                            <h6 class="m-t-5">Mashable, a news website and blog, goes live.</h6>
                                        </a>
                                    </li>

                                    <li>
                                        <div class="timeline-badge info">
                                        </div>
                                        <a class="timeline-panel text-muted" href="#">
                                            <span>30 minutes ago</span>
                                            <h6 class="m-t-5">Google acquires Youtube.</h6>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-4 col-xxl-6 col-lg-6 col-md-6 col-sm-12">
                    <div class="card">
                        <div class="card-header">
                            <h4 class="card-title">Todo</h4>
                        </div>
                        <div class="card-body px-0">
                            <div class="todo-list">
                                <div class="tdl-holder">
                                    <div class="tdl-content widget-todo mr-4">
                                        <ul id="todo_list">
                                            <li><label><input type="checkbox"><i></i><span>Get up</span><a href='#'
                                                                                                           class="ti-trash"></a></label>
                                            </li>
                                            <li><label><input type="checkbox" checked><i></i><span>Stand up</span><a
                                                    href='#' class="ti-trash"></a></label></li>
                                            <li><label><input type="checkbox"><i></i><span>Don't give up the
                                                            fight.</span><a href='#' class="ti-trash"></a></label></li>
                                            <li><label><input type="checkbox" checked><i></i><span>Do something
                                                            else</span><a href='#' class="ti-trash"></a></label></li>
                                            <li><label><input type="checkbox" checked><i></i><span>Stand up</span><a
                                                    href='#' class="ti-trash"></a></label></li>
                                            <li><label><input type="checkbox"><i></i><span>Don't give up the
                                                            fight.</span><a href='#' class="ti-trash"></a></label></li>
                                        </ul>
                                    </div>
                                    <div class="px-4">
                                        <input type="text" class="tdl-new form-control"
                                               placeholder="Write new item and hit 'Enter'...">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-12 col-md-12 col-xxl-6 col-xl-4 col-lg-6">
                    <div class="card">
                        <div class="card-header">
                            <h4 class="card-title">채용 공고 및 지원서 비율</h4>
                            <div class="card-action">
                                <div class="dropdown custom-dropdown">
                                    <div data-toggle="dropdown">
                                        <i class="ti-more-alt"></i>
                                    </div>
                                    <div class="dropdown-menu dropdown-menu-right">
                                        <a class="dropdown-item" href="#">Option 1</a>
                                        <a class="dropdown-item" href="#">Option 2</a>
                                        <a class="dropdown-item" href="#">Option 3</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="chart py-4">
                                <canvas id="ratio-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-12 col-xxl-6 col-lg-6 col-md-12">
                    <div class="row">
                        <div class="col-xl-3 col-lg-6 col-sm-6 col-xxl-6 col-md-6">
                            <div class="card">
                                <div class="social-graph-wrapper widget-facebook">
                                    <span class="s-icon"><i class="fa fa-facebook"></i></span>
                                </div>
                                <div class="row">
                                    <div class="col-6 border-right">
                                        <div class="pt-3 pb-3 pl-0 pr-0 text-center">
                                            <h4 class="m-1"><span class="counter">89</span> k</h4>
                                            <p class="m-0">Friends</p>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="pt-3 pb-3 pl-0 pr-0 text-center">
                                            <h4 class="m-1"><span class="counter">119</span> k</h4>
                                            <p class="m-0">Followers</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-3 col-lg-6 col-sm-6 col-xxl-6 col-md-6">
                            <div class="card">
                                <div class="social-graph-wrapper widget-linkedin">
                                    <span class="s-icon"><i class="fa fa-linkedin"></i></span>
                                </div>
                                <div class="row">
                                    <div class="col-6 border-right">
                                        <div class="pt-3 pb-3 pl-0 pr-0 text-center">
                                            <h4 class="m-1"><span class="counter">89</span> k</h4>
                                            <p class="m-0">Friends</p>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="pt-3 pb-3 pl-0 pr-0 text-center">
                                            <h4 class="m-1"><span class="counter">119</span> k</h4>
                                            <p class="m-0">Followers</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-3 col-lg-6 col-sm-6 col-xxl-6 col-md-6">
                            <div class="card">
                                <div class="social-graph-wrapper widget-googleplus">
                                    <span class="s-icon"><i class="fa fa-google-plus"></i></span>
                                </div>
                                <div class="row">
                                    <div class="col-6 border-right">
                                        <div class="pt-3 pb-3 pl-0 pr-0 text-center">
                                            <h4 class="m-1"><span class="counter">89</span> k</h4>
                                            <p class="m-0">Friends</p>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="pt-3 pb-3 pl-0 pr-0 text-center">
                                            <h4 class="m-1"><span class="counter">119</span> k</h4>
                                            <p class="m-0">Followers</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-3 col-lg-6 col-sm-6 col-xxl-6 col-md-6">
                            <div class="card">
                                <div class="social-graph-wrapper widget-twitter">
                                    <span class="s-icon"><i class="fa fa-twitter"></i></span>
                                </div>
                                <div class="row">
                                    <div class="col-6 border-right">
                                        <div class="pt-3 pb-3 pl-0 pr-0 text-center">
                                            <h4 class="m-1"><span class="counter">89</span> k</h4>
                                            <p class="m-0">Friends</p>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="pt-3 pb-3 pl-0 pr-0 text-center">
                                            <h4 class="m-1"><span class="counter">119</span> k</h4>
                                            <p class="m-0">Followers</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <!--**********************************
        Content body end
    ***********************************-->


    <!--**********************************
        Footer start
    ***********************************-->
    <div class="footer">
        <div class="copyright">
            <p>Copyright © Designed &amp; Developed by <a href="#" target="_blank">Quixkit</a> 2019</p>
            <p>Distributed by <a href="https://themewagon.com/" target="_blank">Themewagon</a></p>
        </div>
    </div>
    <!--**********************************
        Footer end
    ***********************************-->

    <!--**********************************
       Support ticket button start
    ***********************************-->

    <!--**********************************
       Support ticket button end
    ***********************************-->


</div>
<!--**********************************
    Main wrapper end
***********************************-->

<!-- 필수 스크립트 및 라이브러리 -->
<script th:src="@{/vendor/jquery/jquery.min.js}"></script>
<script th:src="@{/vendor/raphael/raphael.min.js}"></script>
<script th:src="@{/vendor/morris/morris.min.js}"></script>
<!-- Vendor Scripts -->
<!-- 기타 필요한 스크립트들 -->
<script th:src="@{/vendor/global/global.min.js}"></script>
<script th:src="@{/js/quixnav-init.js}"></script>
<script th:src="@{/js/custom.min.js}"></script>
<script th:src="@{/vendor/circle-progress/circle-progress.min.js}"></script>
<script th:src="@{/vendor/chart.js/Chart.bundle.min.js}"></script>
<script th:src="@{/vendor/gaugeJS/dist/gauge.min.js}"></script>
<script th:src="@{/vendor/flot/jquery.flot.js}"></script>
<script th:src="@{/vendor/flot/jquery.flot.resize.js}"></script>
<script th:src="@{/vendor/owl-carousel/js/owl.carousel.min.js}"></script>
<script th:src="@{/vendor/jqvmap/js/jquery.vmap.min.js}"></script>
<script th:src="@{/vendor/jqvmap/js/jquery.vmap.usa.js}"></script>
<script th:src="@{/vendor/jquery.counterup/jquery.counterup.min.js}"></script>
<script th:src="@{/js/dashboard/dashboard-1.js}"></script>
<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script th:src="@{/js/graph.js}"></script>
<script>
    $(document).ready(function() {
    var csrfToken = $("meta[name='_csrf']").attr("content");
    var csrfHeader = $("meta[name='_csrf_header']").attr("content");

    // AJAX 요청 전역 설정
    $.ajaxSetup({
        beforeSend: function(xhr) {
            xhr.setRequestHeader(csrfHeader, csrfToken);
        }
    });

    // 승인 버튼 클릭 시
    $('.approve-btn').on('click', function() {
        var compId = $(this).data('id');
        Swal.fire({
            title: '승인 하시겠습니까?',
            text: "이 작업은 되돌릴 수 없습니다!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: '승인',
            cancelButtonText: '취소'
        }).then((result) => {
            if (result.isConfirmed) {
                $.ajax({
                    url: '/admin/approveCompany',
                    type: 'POST',
                    data: { compId: compId },
                    success: function(response) {
                        Swal.fire('승인 완료', response, 'success').then(() => {
                            // 상태 업데이트
                            var row = $('button.approve-btn[data-id="' + compId + '"]').closest('tr');
                            row.find('.status').text('승인됨');  // 상태를 "승인됨"으로 변경
                            row.find('.approve-btn').prop('disabled', true);  // 승인 버튼 비활성화
                            row.find('.reject-btn').prop('disabled', true);   // 거절 버튼 비활성화
                        });
                    },
                    error: function(xhr) {
                        Swal.fire('오류', xhr.responseText, 'error');
                    }
                });
            }
        });
    });

    // 거절 버튼 클릭 시
    $('.reject-btn').on('click', function() {
        var compId = $(this).data('id');
        Swal.fire({
            title: '거절 하시겠습니까?',
            text: "이 작업은 되돌릴 수 없습니다!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: '거절',
            cancelButtonText: '취소'
        }).then((result) => {
            if (result.isConfirmed) {
                $.ajax({
                    url: '/admin/rejectCompany',
                    type: 'POST',
                    data: { compId: compId },
                    success: function(response) {
                        Swal.fire('거절 완료', response, 'success').then(() => {
                            // 상태 업데이트
                            var row = $('button.reject-btn[data-id="' + compId + '"]').closest('tr');
                            row.find('.status').text('거절됨');  // 상태를 "거절됨"으로 변경
                            row.find('.approve-btn').prop('disabled', true);  // 승인 버튼 비활성화
                            row.find('.reject-btn').prop('disabled', true);   // 거절 버튼 비활성화
                        });
                    },
                    error: function(xhr) {
                        Swal.fire('오류', xhr.responseText, 'error');
                    }
                });
            }
        });
    });

    // 승인 또는 거절할 기업 회원이 없을 경우 알림 표시
    if ($('.approve-btn').length === 0 && $('.reject-btn').length === 0) {
        Swal.fire({
            title: '알림',
            text: '승인할 기업 회원이 없습니다.',
            icon: 'info',
            confirmButtonText: '확인'
        });
    }
});

</script>
<!-- index.html 에서 id=pageHeader 해당부분 안보이게 하기(header)-->
<script>
    document.addEventListener("DOMContentLoaded", function() {
        var path = window.location.pathname;
        var pageHeader = document.getElementById("pageHeader");

        if (path === '/' || path === '/index') {
            if (pageHeader) {
                pageHeader.style.display = 'none';
            }
        }
    });
</script>
<!-- index.html 에서 home 안보이게 하기 -->
<script>
    document.addEventListener("DOMContentLoaded", function() {
        // 현재 페이지의 경로를 확인
        if (window.location.pathname === '/index' || window.location.pathname === '/') {
            // 'homeLink' ID를 가진 요소를 찾고 숨기기
            var homeLink = document.getElementById("homeLink");
            if (homeLink) {
                homeLink.style.display = 'none';
            }
        }
    });
</script>
<!-- 페이지 마다 text 다르게 하는 script-->
<script>
    document.addEventListener("DOMContentLoaded", function() {
        var path = window.location.pathname;
        console.log("Current path:", path); // 현재 경로 출력
        var pageTitle = document.getElementById("pageTitle");
        var pageName = document.getElementById("pageName");

        if (path === '/jobPost/jobPostList') {
            pageTitle.textContent = 'Job List';
            pageName.textContent = 'Job List';
        } else if (path == '/about') {
            pageTitle.textContent = 'About';
             pageName.textContent = 'About';
        } else if (path == '/contact') {
            pageTitle.textContent = 'Contact';
            pageName.textContent = 'Contact';
        } else if (path == '/jobPost/jobPostCreate') {
            pageTitle.textContent = '공고 등록하기';
            pageName.textContent = 'CreateJobPost';
        } else if (path == '/jobPost/myJobPostList') {
            pageTitle.textContent = '나의 채용공고';
            pageName.textContent = 'MY POST';
        } else if (path === '/anotherPage') {
            pageTitle.textContent = 'Another Page';
            pageName.textContent = 'Another Page';
        }
    });

    function getCSRFToken() {
    return document.querySelector('meta[name="_csrf"]').getAttribute('content');
}

function getCSRFHeader() {
    return document.querySelector('meta[name="_csrf_header"]').getAttribute('content');
}

function toggleScrap(event) {
    event.preventDefault();

    const button = event.currentTarget;
    const jobPostId = button.getAttribute('data-jobpostid');
    const isScrapped = button.classList.contains('scrap-active');

    fetch('/jobSeeker/scrap/toggle', {
        method: 'POST',
        credentials: 'include',
        headers: {
            'Content-Type': 'application/json',
            [getCSRFHeader()]: getCSRFToken()
        },
        body: JSON.stringify({ jobPostId: jobPostId, isScrapped: isScrapped }) // isScrapped 추가
    })
    .then(response => {
        if (response.redirected) {
            window.location.href = response.url;
            return;
        }
        return response.json();
    })
    .then(data => {
        if (data) {
            const icon = button.querySelector('i');
            if (data.isScrapped) {
                button.classList.add('scrap-active');
                icon.classList.remove('far');
                icon.classList.add('fas');
                alert('스크랩 완료');
            } else {
                button.classList.remove('scrap-active');
                icon.classList.remove('fas');
                icon.classList.add('far');
                alert('스크랩 취소');
            }
        }
    })
    .catch(error => console.error('Error:', error));
}

</script>

<script>
    $(document).ready(function () {
     // 필터 요소를 전역으로 선언
     const addressFilter = document.getElementById('filterAddress');
     const educationFilter = document.getElementById('filterEducation');
     const experienceFilter = document.getElementById('filterExperience');

     // 필터 박스를 토글하는 코드 (문제 없음)
     $('.dev-toggle-filter').click(function () {
         $(this).toggleClass('open');
         $(this).next('.filter-box').toggle();
     });

     // 필터 적용 버튼 클릭 시 필터 함수 호출
     $('#applyFilters').click(function () {
         filterJobs();
     });

     // 필터 함수 정의
     function filterJobs() {
         const addressValue = addressFilter.value.toLowerCase();
         const educationValue = educationFilter.value.toLowerCase();
         const experienceValue = experienceFilter.value.toLowerCase();

         const jobItems = document.querySelectorAll('.job-item');
         jobItems.forEach(function (item) {
             const address = item.getAttribute('data-address').toLowerCase();
             const education = item.getAttribute('data-education').toLowerCase();
             const experience = item.getAttribute('data-experience').toLowerCase();

             const matchesAddress = !addressValue || address.includes(addressValue);
             const matchesEducation = !educationValue || education.includes(educationValue);
             const matchesExperience = !experienceValue || experience.includes(experienceValue);

             if (matchesAddress && matchesEducation && matchesExperience) {
                 item.classList.remove('hidden');
             } else {
                 item.classList.add('hidden');
             }
         });
     }

     // 나머지 코드 (문제 없음)
     $('.dev-button-item').click(function () {
         $(this).toggleClass('active').siblings().removeClass('active');
     });

     $('.search-reset').click(function () {
         $(this).closest('.filter-box').find('.dev-button-item').removeClass('active');
         $(this).closest('.filter-box').find('.dev-button-all').addClass('active');
     });

     $('#resetCondition').click(function () {
         $('.filter-box').find('.dev-button-item').removeClass('active');
         $('.filter-box').find('.dev-button-all').addClass('active');
         $('#searchForm')[0].reset();
     });
 });
</script>

<!-- 검색 -->
<script>
    $(document).ready(function() {
        // 검색 기능 구현
        $('#searchInput').on('input', function() {
            var searchTerm = $(this).val().toLowerCase();

            // 기업 목록 페이지와 구직자 목록 페이지를 구분
            if ($('.tab-pane').length > 0) {
                // 탭이 있는 경우 (기업 목록)
                $('.tab-pane.active .table tbody tr').each(function() {
                    var row = $(this);
                    var idCell = row.find('td').eq(1).text().toLowerCase(); // ID 열
                    var nameCell = row.find('td').eq(2).text().toLowerCase(); // NAME 열
                    var found = idCell.includes(searchTerm) || nameCell.includes(searchTerm);

                    if (found) {
                        row.show();
                    } else {
                        row.hide();
                    }
                });
            } else {
                // 탭이 없는 경우 (구직자 목록)
                $('.container .table tbody tr').each(function() {
                    var row = $(this);
                    var idCell = row.find('td').eq(0).text().toLowerCase(); // ID 열
                    var nameCell = row.find('td').eq(1).text().toLowerCase(); // NAME 열
                    var found = idCell.includes(searchTerm) || nameCell.includes(searchTerm);

                    if (found) {
                        row.show();
                    } else {
                        row.hide();
                    }
                });
            }
        });
    });
</script>


<script>
    $(document).ready(function() {
        var activeTypeFilter = 'all';
        var activeStatusFilter = 'all';

        // 필터 버튼 클릭 이벤트
        $('.type-filter, .status-filter').click(function() {
            var filterType = $(this).hasClass('type-filter') ? 'type' : 'status';
            var filterValue = $(this).data('filter');

            if (filterType === 'type') {
                activeTypeFilter = filterValue;
                $('.type-filter').removeClass('active');
            } else {
                activeStatusFilter = filterValue;
                $('.status-filter').removeClass('active');
            }

            $(this).addClass('active');
            filterTable();
        });

        // 테이블 필터링 함수
        function filterTable() {
            $('#blacklistTable tbody tr').each(function() {
                var row = $(this);
                var type = row.data('type');
                var status = row.data('status');

                var typeMatch = (activeTypeFilter === 'all' || type === activeTypeFilter);
                var statusMatch = (activeStatusFilter === 'all' || status === activeStatusFilter);

                if (typeMatch && statusMatch) {
                    row.show();
                } else {
                    row.hide();
                }
            });
        }

        // 초기 필터링 적용
        filterTable();

        // 필터 초기화
        $('#resetCondition').click(function () {
            activeTypeFilter = 'all';
            activeStatusFilter = 'all';
            $('.type-filter, .status-filter').removeClass('active');
            $('.type-filter[data-filter="all"], .status-filter[data-filter="all"]').addClass('active');
            filterTable();
        });

        // 블랙리스트 토글 기능
        $('.toggle-blacklist').click(function() {
            var id = $(this).data('id');
            var type = $(this).data('type');
            var isCurrentlyBlacklisted = $(this).text().trim().includes('해제');

            if (isCurrentlyBlacklisted) {
                toggleBlacklist(id, type, '');
            } else {
                $('#blacklistReasonModal').modal('show');
                $('#confirmBlacklist').data('id', id).data('type', type);
            }
        });

        $('#confirmBlacklist').click(function() {
            var id = $(this).data('id');
            var type = $(this).data('type');
            var reason = $('#blacklistReason').val();
            toggleBlacklist(id, type, reason);
            $('#blacklistReasonModal').modal('hide');
        });

        // 블랙리스트 토글 함수
        function toggleBlacklist(id, type, reason) {
            var token = $("meta[name='_csrf']").attr("content");
            var header = $("meta[name='_csrf_header']").attr("content");

            $.ajax({
                url: '/admin/blacklist/toggle',
                type: 'POST',
                contentType: 'application/json',
                data: JSON.stringify({ id: id, type: type, reason: reason }),
                beforeSend: function(xhr) {
                    xhr.setRequestHeader(header, token);
                },
                success: function(response) {
                    var button = $(`button[data-id="${id}"]`);
                    var statusCell = button.closest('tr').find('td:nth-child(7)');

                    if (response.isBlacklisted) {
                        button.html('<i class="fas fa-sync-alt"></i> 블랙리스트 해제');
                        statusCell.html('블랙리스트');
                        button.data('status', 'BLACKLIST'); // 상태 업데이트
                    } else {
                        button.html('<i class="fas fa-sync-alt"></i> 블랙리스트 등록');
                        statusCell.html('정상');
                        button.data('status', 'NORMAL'); // 상태 업데이트
                    }

                    Swal.fire({
                        icon: 'success',
                        title: '성공',
                        text: response.isBlacklisted ? '블랙리스트에 추가되었습니다.' : '블랙리스트에서 제거되었습니다.'
                    });

                    // 상태 변경 후 필터링 적용
                    filterTable();

                    // 컴퍼니 리스트 상태 업데이트
                    updateCompanyList();
                },
                error: function(xhr, status, error) {
                    console.error('Error:', error);
                    Swal.fire({
                        icon: 'error',
                        title: '오류',
                        text: '오류가 발생했습니다: ' + error
                    });
                }
            });
        }

        // 컴퍼니 리스트 상태 업데이트 함수
        function updateCompanyList() {
            $.ajax({
                url: '/admin/company/list',
                type: 'GET',
                success: function(data) {
                    $('#companyTable').html(data);
                    updateBlacklistIcons();
                },
                error: function(xhr, status, error) {
                    console.error('Failed to update company list:', error);
                }
            });
        }

        // 블랙리스트 아이콘 업데이트 함수
        function updateBlacklistIcons() {
            $('.company-status').each(function() {
                var status = $(this).data('status');
                var icon = status === 'BLACKLIST' ? '<i class="fas fa-ban"></i>' : '<i class="fas fa-check"></i>';
                $(this).html(icon);
            });
        }

        // 페이지 로드 시 아이콘 초기화
        updateBlacklistIcons();
    });
</script>
<!--    jobpost 모달 스크립트-->
<script>
    document.getElementById('modalBtn').addEventListener('click', function () {
        var myModal = new bootstrap.Modal(document.getElementById('resumePopup'), {
            keyboard: false
        });
        myModal.show();
    });
</script>
<script>
    CKEDITOR.replace('editor1', {
    filebrowserUploadUrl: '/jobPost/uploadImage',
    filebrowserImageUploadUrl: '/jobPost/uploadImage', // 이미지 업로드 URL 추가
    filebrowserUploadMethod: 'form',
    clipboard_handleImages: false
});
</script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
    const form = document.getElementById('suggestionForm');
    form.addEventListener('submit', function (e) {
        e.preventDefault(); // Prevent default form submission
        fetch(form.action, {
            method: 'POST',
            body: new FormData(form),
            headers: {
                'X-Requested-With': 'XMLHttpRequest'
            }
        })
        .then(response => {
            // Check if the response is JSON
            const contentType = response.headers.get('content-type');
            if (contentType && contentType.indexOf('application/json') !== -1) {
                return response.json(); // Process as JSON
            } else {
                // If not JSON, assume it's a redirect to the login page
                return response.text().then(text => {
                    throw new Error('Not JSON: ' + text);
                });
            }
        })
        .then(data => {
            if (data.redirect) { // Handle redirect
                window.location.href = data.redirect;
            } else if (data.success === "true") {
                alert('작성 완료'); // Success message
            }
        })
        .catch(error => {
            console.error('Error:', error);
            // Optionally, handle the error by redirecting to the login page
            if (error.message.startsWith('Not JSON:')) {
                window.location.href = '/member/login';
            }
        });
    });
});
</script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const filterButtons = document.querySelectorAll('.filter-button');
        const jobItems = document.querySelectorAll('.job-item');

        filterButtons.forEach(button => {
            button.addEventListener('click', function () {
                const filter = this.getAttribute('data-filter').trim();

  // 필터 버튼 스타일 변경
                filterButtons.forEach(btn => {
                    btn.classList.remove('btn-primary');
                });
                this.classList.add('btn-primary');

                // 항목 필터링
                jobItems.forEach(item => {
                    const paymentStatus = item.getAttribute('data-payment-status').trim();
                    if (filter === 'all' || paymentStatus === filter) {
                        item.style.display = '';
                    } else {
                        item.style.display = 'none';
                    }
                });
            });
        });
    });
</script>



</body>
</html>